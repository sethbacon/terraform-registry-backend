apiVersion: v1
kind: ConfigMap
metadata:
  name: terraform-registry-config
data:
  # Server
  TFR_SERVER_HOST: "0.0.0.0"
  TFR_SERVER_PORT: "8080"
  TFR_SERVER_BASE_URL: "https://registry.example.com"

  # Database (password in Secret)
  TFR_DATABASE_HOST: "postgres.terraform-registry.svc.cluster.local"
  TFR_DATABASE_PORT: "5432"
  TFR_DATABASE_NAME: "terraform_registry"
  TFR_DATABASE_USER: "registry"
  TFR_DATABASE_SSL_MODE: "require"

  # Storage
  TFR_STORAGE_DEFAULT_BACKEND: "local"
  TFR_STORAGE_LOCAL_BASE_PATH: "/app/storage"
  TFR_STORAGE_LOCAL_SERVE_DIRECTLY: "true"

  # Auth
  TFR_AUTH_API_KEYS_ENABLED: "true"
  TFR_AUTH_OIDC_ENABLED: "false"
  TFR_AUTH_AZURE_AD_ENABLED: "false"

  # Multi-tenancy
  TFR_MULTI_TENANCY_ENABLED: "false"
  TFR_MULTI_TENANCY_DEFAULT_ORGANIZATION: "default"

  # Security (TLS terminated at Ingress)
  TFR_SECURITY_TLS_ENABLED: "false"
  TFR_SECURITY_RATE_LIMITING_ENABLED: "true"

  # Logging
  TFR_LOGGING_LEVEL: "info"
  TFR_LOGGING_FORMAT: "json"

  # Telemetry
  TFR_TELEMETRY_ENABLED: "true"
  TFR_TELEMETRY_METRICS_ENABLED: "true"
  TFR_TELEMETRY_METRICS_PROMETHEUS_PORT: "9090"

  # Dev mode disabled
  DEV_MODE: "false"
