# Production Environment Configuration
# Copy this file to .env.production and fill in all values
# Usage: docker compose -f docker-compose.yml -f docker-compose.prod.yml up -d

# =============================================================================
# Database
# =============================================================================
POSTGRES_PASSWORD=<generate-strong-password>
TFR_DATABASE_HOST=postgres
TFR_DATABASE_PORT=5432
TFR_DATABASE_NAME=terraform_registry
TFR_DATABASE_USER=registry
TFR_DATABASE_PASSWORD=<same-as-POSTGRES_PASSWORD>
TFR_DATABASE_SSL_MODE=disable

# =============================================================================
# Server
# =============================================================================
TFR_SERVER_HOST=0.0.0.0
TFR_SERVER_PORT=8080
TFR_SERVER_BASE_URL=https://registry.yourdomain.com

# =============================================================================
# Security (REQUIRED - generate strong values)
# =============================================================================
# Generate with: openssl rand -hex 32
TFR_JWT_SECRET=<generate-with-openssl-rand-hex-32>

# Must be exactly 32 bytes for AES-256
# Generate with: openssl rand -hex 16
ENCRYPTION_KEY=<32-byte-key-for-aes-256>

# =============================================================================
# Storage
# =============================================================================
TFR_STORAGE_DEFAULT_BACKEND=local
TFR_STORAGE_LOCAL_BASE_PATH=/app/storage
TFR_STORAGE_LOCAL_SERVE_DIRECTLY=true

# Uncomment for S3 storage:
# TFR_STORAGE_DEFAULT_BACKEND=s3
# TFR_STORAGE_S3_REGION=us-east-1
# TFR_STORAGE_S3_BUCKET=terraform-registry
# TFR_STORAGE_S3_ACCESS_KEY_ID=<your-access-key>
# TFR_STORAGE_S3_SECRET_ACCESS_KEY=<your-secret-key>

# Uncomment for Azure Blob storage:
# TFR_STORAGE_DEFAULT_BACKEND=azure
# TFR_STORAGE_AZURE_ACCOUNT_NAME=<your-account>
# TFR_STORAGE_AZURE_ACCOUNT_KEY=<your-key>
# TFR_STORAGE_AZURE_CONTAINER_NAME=terraform-registry

# Uncomment for GCS storage:
# TFR_STORAGE_DEFAULT_BACKEND=gcs
# TFR_STORAGE_GCS_BUCKET=terraform-registry
# TFR_STORAGE_GCS_PROJECT_ID=<your-project-id>

# =============================================================================
# Authentication
# =============================================================================
TFR_AUTH_API_KEYS_ENABLED=true
TFR_AUTH_OIDC_ENABLED=false
TFR_AUTH_AZURE_AD_ENABLED=false

# Uncomment for OIDC:
# TFR_AUTH_OIDC_ENABLED=true
# TFR_AUTH_OIDC_ISSUER_URL=https://your-provider.com
# TFR_AUTH_OIDC_CLIENT_ID=<your-client-id>
# TFR_AUTH_OIDC_CLIENT_SECRET=<your-client-secret>
# TFR_AUTH_OIDC_REDIRECT_URL=https://registry.yourdomain.com/api/auth/callback/oidc

# =============================================================================
# Multi-tenancy
# =============================================================================
TFR_MULTI_TENANCY_ENABLED=false
TFR_MULTI_TENANCY_DEFAULT_ORGANIZATION=default

# =============================================================================
# Logging & Telemetry
# =============================================================================
TFR_LOGGING_LEVEL=warn
TFR_LOGGING_FORMAT=json
TFR_TELEMETRY_ENABLED=true
TFR_TELEMETRY_METRICS_ENABLED=true
TFR_TELEMETRY_METRICS_PROMETHEUS_PORT=9090
